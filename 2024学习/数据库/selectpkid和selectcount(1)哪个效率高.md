## select pkid 和 select count(1) 哪个效率高

先说结论： 即使pkid为表的主键， select count(1) 效率仍然更高

在 SQL 查询中，`SELECT COUNT(1)` 和 `SELECT pkid` 的效率差异主要取决于查询的具体上下文和数据库的实现。以下是对这两种查询的详细分析：

1. **`SELECT COUNT(1)`**：
   - 该查询用于计算表中总记录数。
   - 执行时数据库会扫描整张表（或者使用索引）来计算记录数。
   - 不返回数据，只返回一个数值，表示记录的总数。
2. **`SELECT pkid`**：
   - 该查询返回表中的所有 `pkid` 列的值。
   - 如果 `pkid` 是主键或有索引，这个查询会利用索引扫描来提高效率。
   - 返回的数据量取决于表的记录数，因为每一条记录的 `pkid` 都会被返回。

### 效率比较

- **I/O 操作**：`SELECT COUNT(1)` 通常只返回一个数值，所需的 I/O 操作较少。而 `SELECT pkid` 会返回所有记录的主键值，数据量较大，I/O 操作相对较多。
- **计算**：`SELECT COUNT(1)` 只需要统计记录数，计算量较小。而 `SELECT pkid` 需要读取所有的 `pkid` 值，计算量和内存消耗较大。
- **索引利用**：如果 `pkid` 列有索引，`SELECT pkid` 可以利用索引扫描，这样可以提高查询效率。但总体来说，`SELECT COUNT(1)` 在大多数数据库中也会利用索引来快速统计记录数。

### 具体实例

假设有一张名为 `employees` 的表，并且 `pkid` 是该表的主键，以下是两个查询的对比：

- `SELECT COUNT(1) FROM employees;`
- `SELECT pkid FROM employees;`

对于 `COUNT(1)` 查询，数据库只需要统计记录数，不需要读取每一行的具体数据，通常效率较高。

对于 `SELECT pkid` 查询，数据库需要读取每一行的 `pkid` 值，并返回这些值，尤其在数据量较大时，效率会明显低于 `COUNT(1)`。

### 总结

在大多数情况下，`SELECT COUNT(1)` 的效率会高于 `SELECT pkid`，尤其是在数据量较大时。原因是 `COUNT(1)` 只需要统计记录数，不需要返回具体的数据，从而减少了 I/O 和内存消耗。

当然，具体情况可能因数据库的实现和表的具体结构而有所不同，建议在实际应用中进行性能测试，以确定最佳的查询方式。