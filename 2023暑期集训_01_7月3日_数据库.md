瀑布模型：

- 需求规格说明书
- 概要设计（包括数据库设计）
- 详细设计（伪代码之类的）
- 编码
- 测试

----------------------

小厂一般使用敏捷开发

# 数据库

设计基本步骤：

>1. 找名词
>2. 把名词分两类（实体，属性）
>3. 一个实体一张表
>     一个属性一个字段
>4. 确定表和表之间的关系:
>   - 1对1：主表中添加从表的编号作为关联字段
>   - 1对多：在多的一端中添加1的一端的编号作为关联字段
>   - 多对多：再添加一张关系表用来记录两边的编号

### **ER图**：

### 辅助我们进行数据库表结构设计的工具

在ER图中

> 矩形：实体
> 椭圆：属性
> 菱形：关系

![ER图](https://res.cloudinary.com/dvqgs9esp/image/upload/v1688353564/ER图_q01tnx.png)

### 范式：

### ————判断数据库中某张表设计的好坏的规范

> 1. 第一范式：列不可分（每一个字段都是不可再分的最小原子单位）
> 2. 第二范式：要有主键，不存在部分依赖
>    （主键：某个字段非空唯一）
>    （联合主键：多个字段的组合作为主键）
>    （所有非主键字段必须完全依赖联合主键）
> 3. 第三范式：不存在传递依赖
>    （所有非主键字段必须直接依赖主键）

## Oracle

sql	---- 标准的查询语言
DDL ---- 数据定义语言：针对数据库对象操作的
DML ---- 数据操纵语言：针对数据操作的





~~~sql
-- 查询服务器时间
select sysdate from dual;
~~~

关于dual：

1. dual不是缩写词，本身就是完整的单词
2. Oracle中的dual表是一个单行单列的虚拟表
3. Dual表是oracle与数据字典一起地总创建的一个表，这个表只有1列：DUMMY，数据类型为VERCHAR2(1)，dual表中只有一个数据：‘X’，Oracle有内部逻辑保证dual表中永远只有一条数据。
4. Dual表主要用来选择系统变量或求一个简单的例子：
   SELECT sysdate FROM daul
   而Oracle的SELECT语法限制为：
   SELECT * FROM table
   所以，没有表名就没有办法查询，而时间日期并不存放在任何表中，于是这个dual虚拟表的概念就被引入了。
5. dual表的用途：
   dual是Oracle中的一个实际存在的表，任何用户均可读取，常用在没有目标表的SELECT语句块中

### 创建一张表：

~~~sql
CREATE TABLE 表名(
字段1 类型，
字段2 类型，
    ...
)
~~~

例如：
~~~sql
CREATE TABLE comifo20230703(
pno VARCHAR2(32),
pname VARCHAR2(32),
gender VARCHAR2(6),
birthday DATE,
phone NUMBER(32)
);
~~~

### 事务

数据库中保证数据准确性，完整性，一致性和原子性的一种机制，当我们增删改数据后，需要提交事务，事务不仅可以被提交，还可以被回滚。

### 修改一张表

1. 添加字段：

~~~sql
ALTER TABLE 表名 ADD(
字段名 类型
);
~~~

例如：

~~~sql
ALTER TABLE comifo20230703 ADD(
qq number(32)
);
~~~

2. 修改字段名

~~~sql
ALTER TABLE 表名 RENAME 旧字段名 TO 新字段名;
~~~

例如：

~~~sql
ALTER TABLE comifo20230703 RENAME COLUMN qq TO wechat;
~~~

3. 修改字段类型

~~~sql
ALTER TABLE 表名 MODIFY(
字段名 新类型
);
~~~

例如：

~~~sql
ALTER TABLE comifo20230703 MODIFY(
wechat varchar2(32)
);
~~~

4. 删除字段

~~~sql
ALTER TABLE 表名 DROP(字段名);
~~~

例如：

~~~sql
ALTER TABLE comifo20230703 DROP(wechat);
~~~

5.修改表名

~~~sql
ALTER TABLE 旧表名 RENAME TO 新表名;
~~~

例如：

~~~sql
ALTER TABLE comifo20230703 RENAME to comifo0703;
~~~

### 删除一张表

~~~sql
DROP TABLE 表名;
~~~

例如：

~~~sql
DROP TABLE comifo0703;
~~~

### 插入一条记录

~~~sql
INSERT INTO 表名(字段1,字段2,...)
VALUES('值1','值2',...);
~~~

例如：

~~~sql
INSERT INTO comifo703
  (pno, pname, phone)
VALUES
  ('1001', '张三', '18112923121');
~~~

语句执行完成后要手动提交事务（？？？一般来说数据库系统会自动提交事务，所以这到底是什么原因呢？？？）

注意：当对表中所有字段插入数据时，values前面的小括号可以省略



### 字符串转日期函数

to_date(日期字符串，日期格式)

注意：在格式中，y表示年，m表示月，d表示日，hh表示12小时制，hh24表示24小时制，mi表示分钟，ss表示秒。

例如：

~~~sql
INSERT INTO comifo703
  (pno, pname,gender,birthday, phone) 
VALUES
  ('1002', '李四','男',to_date('2001-06-15','yyyy-mm-dd'),'13944572390');
~~~

~~~sql
INSERT INTO comifo703
  (pno, pname, gender, birthday, phone)
VALUES
  ('1004',
   '荀一',
   '男',
   TO_DATE('2000-07-31 13：23：32', 'yyyy-mm-dd hh24:mi:ss'),
   '1391221390');
~~~



### 修改字段

~~~sql
UPDATE 表名 SET 字段名 = 字段值 WHERE　条件语句; 
~~~

例如：

~~~sql
UPDATE comifo703 SET phone = '5542278383' WHERE pno = '1002';
~~~

### 删除语句

~~~sql
DELETE FROM 表名 WHERE 条件语句;
~~~

例如：

~~~sql
DELETE FROM comifo703 WHERE pno = '1001';
~~~

### 查询语句

~~~sql
SELECT 字段1,字段2,... FROM 表名 WHERE 条件;
~~~

例如：

~~~sql
 SELECT pno,pname,phone FROM comifo703 WHERE pno = '1002';
~~~

### 日期型转字符串型

to_char()

例如：

~~~sql
SELECT pno, pname, to_char(birthday, 'yyyy-mm-dd'), phone
  FROM comifo703
 WHERE pno = '1002';
~~~

### 约束

1.非空 ---- NOT NULL

例如：

~~~sql
CREATE TABLE comifo703(
pno varchar2(32),
pname varchar2(32),
gender varchar2(6),
birthday date,
phone number(32) NOT NULL	-- 非空
);
~~~

2.唯一 ---- UNIQUE

注意：如果非空并且唯一，那么UNIQUE需要单独编写：
~~~sql
CONSTRAINT 约束名 UNIQUE(字段)
~~~

例如：

~~~sql
CREATE TABLE comifo703(
pno varchar2(32),
pname varchar2(32),
gender varchar2(6),
birthday date,
phone number(32) NOT NULL,
CONSTRAINT uk703 UNIQUE(phone) -- 唯一
);
~~~

注意：小括号中如果有多个字段，则表示他们的组合不能重复。此外，如果要为组合添加约束，则必须使用constraint语句，而不能将unique挂在字段类型的后面

例如：

~~~sql
CREATE TABLE comifo703(
pno varchar2(32),
pname varchar2(32),
gender varchar2(6),
birthday date,
phone number(32) not null,
constraint uk703 unique(phone,pname)
);
~~~

3.主键约束 ---- PRIMARY KEY

自带非空唯一的功能

例如：

~~~sql
DROP TABLE comifo703;

CREATE TABLE comifo703(
pno varchar2(32) PRIMARY KEY, -- 主键约束
pname varchar2(32),
gender varchar2(6),
birthday date,
phone number(32) not null,
constraint uk703 unique(phone,pname)
);
~~~

主键约束也可以使用constraint编写
constraint 约束名 primary key(字段)

注意：小括号内如果有多个字段，则表示他们是联合主键。
例如：

~~~sql
CREATE TABLE comifo703(
pno varchar2(32),
pname varchar2(32),
gender varchar2(6),
birthday date,
phone number(32) not null,
constraint uk703 unique(phone,pname),
constraint pk703 primary key(pno,pname) -- 联合主键
);
~~~































