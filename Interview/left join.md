### 🔍 **1. LEFT JOIN 基本概念**

在 SQL 中，`LEFT JOIN`（左连接）是指**返回左表中的所有记录**，以及右表中**满足连接条件的匹配记录**。如果右表中没有匹配的记录，则会使用 `NULL` 填充右表的字段。

#### **基本语法**

```sql
SELECT *
FROM A
LEFT JOIN B ON A.id = B.a_id;
```

- **A 表（左表）**：所有行都会返回。
- **B 表（右表）**：仅返回与 A 表匹配的行，如果没有匹配，则右表字段显示为 `NULL`。

------

## 📊 **2. LEFT JOIN 数据条数规则**

### ✅ **情况1：右表存在匹配项（1对1匹配）**

**假设：**

- 左表 `A` 有 **5行** 数据
- 右表 `B` 中所有记录都能与左表匹配

**查询结果：**

- 返回 **5行** 数据（每行都成功匹配到右表的一条记录）。

------

### ✅ **情况2：右表存在多条匹配项（1对多匹配）**

**假设：**

- 左表 `A` 有 **3行** 数据
- 右表 `B` 有多条记录可以匹配到左表的某一行（例如，A 的某一行在 B 中匹配到 2 行）

**查询结果：**

- 如果 A 的某行在 B 中匹配到 **N条** 记录，则该行会被**重复 N 次**，每次与不同的 B 记录组合。
- 总记录数 = **左表行数 × 匹配的右表行数**。

**示例：**

| **A.id** | **A.name** | **B.id** | **B.value** |
| -------- | ---------- | -------- | ----------- |
| 1        | Tom        | 10       | Apple       |
| 1        | Tom        | 11       | Orange      |
| 2        | Jerry      | NULL     | NULL        |
| 3        | Mike       | 12       | Banana      |

**总记录数：4 行**（第1行在右表匹配了2次，其他行各1次）。

------

### ✅ **情况3：右表没有匹配项**

**假设：**

- 左表 `A` 有 **5行** 数据
- 右表 `B` 中没有任何记录能匹配 A 表

**查询结果：**

- 结果中所有右表的字段将填充 `NULL`。
- 返回 **5行** 数据。

------

### ✅ **情况4：带条件的 LEFT JOIN**

**查询带有条件筛选**

```sql
SELECT *
FROM A
LEFT JOIN B ON A.id = B.a_id
WHERE B.value = 'someValue';
```

- **关键点**：`WHERE` 条件会在整个结果集上进行过滤，这可能导致**LEFT JOIN 变成 INNER JOIN**，因为不满足 `B.value = 'someValue'` 的行（包括右表为 `NULL` 的行）都会被排除。

**正确写法（保留 LEFT JOIN 结果）：**

```sql
SELECT *
FROM A
LEFT JOIN B ON A.id = B.a_id AND B.value = 'someValue';
```

- **差异**：`WHERE` 在过滤阶段会排除所有不匹配的行，而 `ON` 只影响连接匹配的结果。

------

## ⚠️ **3. 常见问题**

### **❓ 为什么 LEFT JOIN 的结果条数比左表多？**

- **原因**：左表中的某一行在右表中匹配到**多条记录**。
- **解决**：使用 `DISTINCT` 或者 `GROUP BY` 来去重。

#### **示例：去重处理**

```sql
SELECT DISTINCT A.id, A.name
FROM A
LEFT JOIN B ON A.id = B.a_id;
```

### **❓ 如果我只想要左表的记录条数，不关心右表匹配的重复记录？**

#### **使用 COUNT DISTINCT**

```sql
SELECT COUNT(DISTINCT A.id)
FROM A
LEFT JOIN B ON A.id = B.a_id;
```

------

## 📚 **4. 小结**

| **情况**        | **结果条数**            |
| --------------- | ----------------------- |
| 1对1匹配        | 左表行数                |
| 1对多匹配       | 左表行数 × 匹配右表行数 |
| 没有匹配项      | 左表行数                |
| 带 `WHERE` 过滤 | 可能导致行数减少        |

**✅ 建议：**

1. 如果 LEFT JOIN 数据量较大，注意检查是否存在 1对多关系。
2. 使用 `DISTINCT` 或 `GROUP BY` 控制重复行。
3. 注意 `ON` 和 `WHERE` 条件的区别，避免无意中将 `LEFT JOIN` 转变为 `INNER JOIN`。

------

希望这个解析对你有帮助！如果还有疑问或需要具体场景示例，随时告诉我！😊