# 2023年8月4日

## servlet登录

~~~java
//src\main\java\com.iweb.test\Login
public class Login implements Servlet {

    ServletContext sc;

    @Override
    public void init(ServletConfig servletConfig) throws ServletException {
        sc = servletConfig.getServletContext();
    }

    @Override
    public ServletConfig getServletConfig() {
        return null;
    }

    @Override
    public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {

        String username = sc.getInitParameter("username");
        String password = sc.getInitParameter("password");
        //页面上填写的账号密码
        String usernameParam = servletRequest.getParameter("username");
        String passwordParam = servletRequest.getParameter("password");

        PrintWriter pw = servletResponse.getWriter();
        if (username.equals(username) && password.equals(passwordParam)) {
            pw.print("hello " + usernameParam);
        } else {
            pw.print("sorry " + usernameParam);
        }

    }

    @Override
    public String getServletInfo() {
        return null;
    }

    @Override
    public void destroy() {

    }
}

~~~

~~~xml
<!-- web\WEB-INF\web.xml   -->
    <context-param>
        <param-name>username</param-name>
        <param-value>admin</param-value>
    </context-param>


    <context-param>
        <param-name>password</param-name>
        <param-value>123456</param-value>
    </context-param>


    <servlet>
        <servlet-name>login</servlet-name>
        <servlet-class>com.iweb.test.Login</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>login</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>
~~~

~~~html
<!-- web\login.html   -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户登录</title>
</head>
<body>
<h3>用户登录</h3>
<form action="login" method="post">
    账号：<input type="text" name="username"/>
    <br/><br/>
    密码：<input type="password" name="password"/>
    <br/><br/>
    <input type="submit" value="登录"/>
</form>
</body>
</html>
~~~

## HttpServletRequest

它是ServletRequest的子接口，它拥有了ServletRequest中所有的方法，我们浏览器发起的请求实际上全都是HttpServletRequest类型

常用方法：

getServletContext() ---- 获取当前ServletContext对象

```java
@Override
public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {
    System.out.println("来了一个请求");
    System.out.println(servletRequest instanceof HttpServletRequest);
    HttpServletRequest request = (HttpServletRequest) servletRequest;
    ServletContext sc = request.getServletContext();
    System.out.println(sc.getInitParameter("username"));
}
```

getRequestURI() ---- 获取当前请求URL中的URI部分（URI =URL - web站点根目录）

getMethod() ---- 获取当前请求的请求方式

getServletPaht() ----  获取当前请求名

getContextPath() ---- 获取当前web应用根目录

~~~java
   @Override
    public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {
        System.out.println("来了一个请求");
        System.out.println(servletRequest instanceof HttpServletRequest);
        HttpServletRequest request = (HttpServletRequest) servletRequest;
        ServletContext sc = request.getServletContext();
        System.out.println(sc.getInitParameter("username"));
        String uri = request.getRequestURI();
        String method = request.getMethod();
        System.out.println(method);
        String urlpattern = request.getServletPath();
        System.out.println(urlpattern);
        String contextPath = request.getContextPath();
        System.out.println(contextPath);
    }
~~~

## HttpServlet

这是一个抽象类，它实现了Servlet接口，它重写了接口中生命周期相关的方法，它将ServletRequest和ServletResponse向下转型成了HttpServletRequest和HttpServletResponse然后它调用了getMethod()判断当前请求的请求方式，并提供了doGet和doPost供我们重写

在实际开发中，我们无序实现Servlet接口，只需要继承HttpServlet，并重写doGet或者doPost方法即可，可以专注于业务逻辑的开发。